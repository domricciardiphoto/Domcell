(function () {function w(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=x(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,u=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){o=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw a}}}}function x(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return(t.prefix?t.prefix:"")+e+(t.suffix?t.suffix:"")}function p(e){return!e||0===e.length}function f(e){return p(e)?"":e}function q(e,t){if(null!==t)switch(e.method){case"text":switch(e.ruleType){case"add_text":return t.textContent=m(p(t.textContent)?"":t.textContent,e.value);case"replace_text":return t.textContent=t.textContent.replace(e.value.search,e.value.value);case"delete_text":return t.textContent=t.textContent.replace(e.value.value,"");default:return t.textContent=e.value;}case"inner_html":return t.innerHTML=e.value;case"attribute":if(!e.key)throw Error("attribute method requires a 'key' property");switch(e.ruleType){case"add_text":return t.setAttribute(e.key,m(f(t.getAttribute(e.key)),e.value));case"replace_text":return t.setAttribute(e.key,f(t.getAttribute(e.key)).replace(e.value.search,e.value.value));case"delete_text":return t.setAttribute(e.key,f(t.getAttribute(e.key)).replace(e.value.value,""));default:return t.setAttribute(e.key,e.value);}case"tag_replace":var r=document.createElement(e.value);return r.innerHTML=t.innerHTML,t.parentNode.replaceChild(r,t);case"replace":return t.outerHTML=e.value;case"remove":return t.remove();default:throw Error("Unknown method: ".concat(e.method));}}var b="content_scalpel_client_data";var y="show_live_editor_timings";var g=2;var s={buildSelectorsArray:function(e){for(var t=/:nth-(of-type|last-of-type|child|last-child)\((\d+)/g,r=[],n=[],a=function(e,t,r){return e.substr(0,t.index)+r+e.substr(t.index+t.value.length)},u=e.replace(/(\S+\s*[+~]\s*)+(\S+)/g,"$2").split(/\s+/g).filter(function(e){return!(">"===e||0===e.indexOf("#"))}),o=t.exec(e);o;o=t.exec(e))r.push({index:o.index+o[0].length-1,value:o[2]});u.length&&/:nth-/.test(u[u.length-1])&&r.pop();for(var l=0;l<r.length;l++)for(var i=r[l],c=0;c>-g;){c=c>=0&&c<g?c+1:c===g?-1:c-1;var d=Number(i.value)+c;if(d<1)break;n.push(a(e,i,d))}return n},getValue:function(e){return e.textContent},checkValue:function(e,t){return"upsert"===t.type||!t.originValue||!e||0===this.getValue(e).indexOf(t.originValue)},find:function(e){var t=e.selector;if(!t)return null;var r=document.querySelector(t);if(null===(r=this.checkValue(r,e)?r:null)){var n,a=w(this.buildSelectorsArray(t));try{for(a.s();!(n=a.n()).done;){var u=n.value;if(r=document.querySelector(u),r=this.checkValue(r,e)?r:null)break}}catch(o){a.e(o)}finally{a.f()}}return null===r&&console.warn("Can't find element with selector: ".concat(t)),r},change:function(e){return q(e,this.find(e))},upsert:function(e){var t=this.find(e);if(null===t){if(!e.create||!e.parent)return void console.warn("Upsert rule must contain 'create' and 'parent' properties");var r=document.querySelector(e.parent);if(null===r)return void console.warn("Upsert rule parent element cannot be found");var n=document.createElement("div");n.innerHTML=e.create.trim(),t=n.firstChild,r.append(t)}return q(e,t)}};var v={getPath:function(){var t;try{t=decodeURIComponent(window.location.pathname)}catch(o){t=window.location.pathname}return t},getSearch:function(){var t;try{t=decodeURIComponent(window.location.search)}catch(o){t=window.location.search}return t}};var z=["tag_replace","replace","remove"],h={getDescriptors:function(r){if(!r||!r.descriptors)return[];var e=v.getPath();return r.descriptors.filter(function(r){if(!r.matcher||void 0===r.matcher.path||!r.matcher.rule)return!1;switch(r.matcher.rule){case"equals":return r.matcher.path===e||r.matcher.path===e.replace(/\/$/,"");default:return!1;}})},getScenariosForDescriptor:function(r,e){var t=[];return e&&e.scenarioIds&&r&&r.scenarios&&r.scenarios.forEach(function(r){-1!==e.scenarioIds.indexOf(r.id)&&t.push(r)}),t},sortScenarios:function(r){return r?r.slice().sort(function(r,e){return r.rules&&e.rules?r.rules.some(function(r){return-1!==z.indexOf(r.method)})?1:-1:0}):r}};var j=function(t){h.getDescriptors(t).forEach(function(r){var e=h.getScenariosForDescriptor(t,r);h.sortScenarios(e).forEach(function(t){t.rules&&t.rules.forEach(function(t){switch(t.type){case"change":return s.change(t);case"upsert":return s.upsert(t);default:throw Error("Unknown rule type: ".concat(t.type));}})})})};var A=function(){var e=function(){var e=new URLSearchParams(v.getSearch()),t=e.get(b),r=e.get(y);if(window&&"null"!==t&&"[object Object]"===Object.prototype.toString.call(window[b])&&"[object Array]"===Object.prototype.toString.call(window[b].descriptors)&&"[object Array]"===Object.prototype.toString.call(window[b].scenarios)){if(r){console.clear();var o=performance.getEntries().filter(function(e){return /^http(s)?:\/\/(dev-)?cdn-cs.conductor.com/.test(e.name)&&"script"===e.initiatorType}),a=performance.now();if(console.group("Live Editor Timings"),j(window[b]),2!==o.length)throw Error("Live Editor Script was not found!");console.table({executor:{"fetch delay (ms)":Math.round(o[0].fetchStart),"load time (ms)":Math.round(o[0].duration)},"data model":{"fetch delay (ms)":Math.round(o[1].fetchStart),"load time (ms)":Math.round(o[1].duration)}});var n=performance.now()-a;console[n>1e3?"warn":"log"]("Page processing time (ms): "+Math.round(n)),console.groupEnd("Live Editor Timings")}else j(window[b]);if(t)try{j(JSON.parse(t));var c=document.createElement("div");c.append("Live Editor Preview: You're viewing a draft version of the page. Return to Conductor Searchlight to publish the changes."),c.style.cssText="color:white;background:#40B0A6;font-size:20px;text-align:center;font-weight:bold;top:0;left:0;right:0;position:fixed;z-index:9999999;line-height:28px;padding:10px;",document.body.style.cssText="margin-top:50px!important ",document.body.prepend(c)}catch(i){throw Error("Preview mode params are not a valid JSON")}}};(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)};A();})();