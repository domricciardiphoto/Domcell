function setSchemaType(e){currentSchemaType=e}function generateJsonSchema(){$(".schemalayer").remove();const e=$("#pullthecode2").html(),t=document.getElementById("schemapagetitle").value,n=document.getElementById("schemapageurla").value,o=new DOMParser,a=o.parseFromString(e,"text/html");let r={};if("article"===currentSchemaType?r=generateArticleSchema(a,t,n):"faq"===currentSchemaType&&(r=generateFaqSchema(a,n)),""===t)return!1;$("#pullthecode3").append('<div class="width100c layoutpale layoutpale100 liverow onblock schemalayer"><script type="application/ld+json">'+JSON.stringify(r,null,2)),$("#beautycode").val($("#pullthecode3").html())}function generateArticleSchema(e,t,n){const o={"@context":"https://schema.org","@type":"Article",mainEntityOfPage:{"@type":"WebPage","@id":n},headline:t||"",content:[]},a=e.body.querySelectorAll("*");return o.content=parseHtmlElements(a),o}function generateFaqSchema(e,t){const n={"@context":"https://schema.org","@type":"FAQPage",mainEntityOfPage:{"@type":"WebPage","@id":t},mainEntity:[]},o=e.body.querySelectorAll("*");return n.mainEntity=parseFaqElements(o),n}function parseHtmlElements(e){const t=[];return e.forEach(e=>{const n=createElementSchema(e);n&&t.push(n)}),t}function parseFaqElements(e){const t=[];let n=null;return e.forEach(e=>{"h2"===e.tagName.toLowerCase()||"h3"===e.tagName.toLowerCase()?(n&&t.push(n),n={"@type":"Question",name:e.textContent.trim().replace(/\s+/g," "),acceptedAnswer:{"@type":"Answer",text:""}}):"p"===e.tagName.toLowerCase()&&n&&(n.acceptedAnswer.text+=e.textContent.trim().replace(/\s+/g," ")+" ")}),n&&t.push(n),t.forEach(e=>{e.acceptedAnswer.text=e.acceptedAnswer.text.trim().replace(/\s+/g," ")}),t}function createElementSchema(e){let t=null;const n="https://www.pcrichard.com";switch(e.tagName.toLowerCase()){case"p":t={type:"paragraph",text:e.textContent.trim().replace(/\s+/g," ")};break;case"img":t={type:"image",src:getAbsoluteUrl(e.getAttribute("data-src")||e.getAttribute("src"),n),alt:e.getAttribute("alt")};break;case"h2":case"h3":case"h4":case"h5":case"h6":t={type:"heading",level:parseInt(e.tagName.charAt(1)),text:e.textContent.trim().replace(/\s+/g," ")};break;case"ul":t={type:"list",items:[]},e.querySelectorAll("li").forEach(e=>{t.items.push({type:"listItem",text:e.textContent.trim().replace(/\s+/g," ")})});break;case"div":if(e.className.includes("wp-block-image")){const o=e.querySelector("img");o&&(t={type:"image",src:getAbsoluteUrl(o.getAttribute("src"),n),alt:o.getAttribute("alt")})}}return t}function getAbsoluteUrl(e,t){return e&&e.startsWith("/")?t+e:e}document.getElementById("scrape-form").addEventListener("submit",async function(e){e.preventDefault();let t=document.getElementById("url-input").value;const n=document.getElementById("replacement-select").value,o=document.getElementById("result");o.textContent="Fetching data...",t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t);try{const e=await fetch(t),a=await e.text(),r=new DOMParser,i=r.parseFromString(a,"text/html"),s=i.querySelector(".seo-banner-id");if(s){let e=null;for(let t of s.childNodes)if(t.nodeType===Node.COMMENT_NODE){e=t.nodeValue.trim();break}if(e){let t=e.replace(/^\[\s*|\s*\]$/g,"");t.endsWith("_banner")&&(t=t.replace("_banner",n)),o.textContent=t}else o.textContent="No comment found in the div with class 'seo-banner-id'."}else o.textContent="ID not found: Check URL or different method required"}catch(e){o.textContent=`An error occurred: ${e.message}`}$("#getexistingcontent , #result").show()}),$("#getexistingcontent").on("click",function(){var e=$("#url-input").val(),t=$("#replacement-select").val();e?$.get(e,function(e){var n;if(n="_copy"===t?$(e).find(".seo-copy-id").find("div.content-asset").html():$(e).find(".seo-banner-id").find("div.content-asset").html(),n){var o=$("<div>").html(n);o.find('link[rel="stylesheet"]').each(function(){var e=$(this).attr("href");e&&"https://www.pcrichard.com/on/demandware.static/-/Library-Sites-PCRichardSharedLibrary/default/v1722481309690/pim-content/Roundedmenu2024.css"!==e&&$(this).attr("href",e.replace("https://www.pcrichard.com",""))}),o.find("img[data-src]").each(function(){$(this).attr("src",$(this).attr("data-src"))}),n=o.html(),$("#pullthecode3, #mobilepreview2").append('<div class="width100c layoutpale layoutpale100 liverow droppable onblock ui-droppable"><div class="width100c liveelement in910 layoutpale layoutpale100 explorerselected interedit">'+n+"</div></div>"),$("#fetchmyid").hide(),$("#uniqueModal").fadeOut(800)}else $("#result").text("No content found")}).fail(function(){$("#result").text("Failed to fetch the content. Please check the URL and try again.")}):$("#result").text("Please enter a URL.")}),$("#getexistingcontent2").on("click",function(){var e=$("#url-input2").val();e?$.get(e,function(e){var t=$(e).find(".pdp-description").html();if($("#firstmatrix").click(),t){t=t.replace(/<link[^>]*rel="stylesheet"[^>]*>/g,"");var n=$("<div>").html(t);n.find("img[data-src]").each(function(){$(this).attr("src","https://pcrichard.com"+$(this).attr("data-src"))}),t=n.html(),$("#pullthecode3 , #mobilepreview2").append('<div class="width100c layoutpale layoutpale100 liverow droppable onblock ui-droppable"><div class="width100c liveelement in910 layoutpale  layoutpale100 explorerselected interedit">'+t+"</div></div>"),$("#fetchmyid").hide(),$("#uniqueModal").fadeOut(800)}else $("#result").text("No content found")}).fail(function(){$("#result").text("Failed to fetch the content. Please check the URL and try again.")}):$("#result").text("Please enter a URL.")}),$("#getexistingcontent3").on("click",function(){var e=$("#url-input3").val();e?$.get(e,function(e){var t=$(e).find(".details").html();$("#firstmatrix").click(),t?(t=t.replace(/<link[^>]*rel="stylesheet"[^>]*>/g,""),$("#pullthecode3 , #mobilepreview2").append('<div class="width100c layoutpale layoutpale100 liverow droppable onblock ui-droppable"><div class="width100c liveelement in910 layoutpale  layoutpale100 explorerselected interedit">'+t+"</div></div>"),$("#fetchmyid").hide(),$("#uniqueModal").fadeOut(800)):$("#result").text("No content found")}).fail(function(){$("#result").text("Failed to fetch the content. Please check the URL and try again.")}):$("#result").text("Please enter a URL.")});let currentSchemaType="article";var myschedule;document.getElementById("dateForm").addEventListener("submit",function(e){e.preventDefault(),$(".timekeeper").remove();var t=document.getElementById("startDate").value,n=document.getElementById("endDate").value;myschedule=`<div class="timekeeper width100c layoutpale layoutpale100 liverow  onblock"><script class="timekeeper21">\ndocument.addEventListener('DOMContentLoaded', function () {\nvar startDate = new Date('${t}');\nvar endDate = ${n?"new Date('"+n+"')":"null"};\nif (endDate) {\nendDate.setDate(endDate.getDate() + 1); \n}\nvar currentDate = new Date();\nvar elements = document.querySelectorAll('.totalinternalcontent');\nif (currentDate >= startDate && (!endDate || currentDate < endDate)) {\nelements.forEach(function (element) {\nelement.style.display = 'block';\n});\n} else {\nelements.forEach(function (element) {\nelement.style.display = 'none';\n});\n}\n});\n</script></div>`,console.log(myschedule),$("#pullthecode3").append(myschedule)}),$(".showmyfetch").on("click",function(){openfetch=$(this).attr("openfetch"),backimage=$(this).attr("backimage"),$(".myfetcher").hide(),$(openfetch).fadeIn(),$(".showmyfetch").css("color","#fff").css("border-color","#fff").css("opacity","1"),$(this).css("color","yellow").css("border-color","yellow").css("opacity","0.5"),$("#fetchmyid .modal-content").attr("style",function(){return""}).attr("style",function(){return"background-image: url(assets/fetch-black"+backimage+".png) !important;"})}),document.addEventListener("DOMContentLoaded",()=>{function e(){const e=indexedDB.open(c,1);e.onupgradeneeded=(e=>{d=e.target.result,d.createObjectStore(l,{keyPath:"id",autoIncrement:!0})}),e.onsuccess=(e=>{d=e.target.result,s()}),e.onerror=(e=>{console.error("Database error:",e.target.errorCode)})}function t(e,t){const n=d.transaction([l],"readwrite"),o=n.objectStore(l),a=1,r={projectId:a,versionName:e,content:t,createdAt:new Date},i=o.add(r);i.onsuccess=(()=>{$("#versionName").val(""),$(".modalmessaging").text("Version Saved Successfully"),$(".modalmessaging").delay(2e3).queue(function(e){$(this).text(""),e()}),s()}),i.onerror=(e=>{console.error("Save version error:",e.target.errorCode)})}function n(e){const t=d.transaction([l],"readonly"),n=t.objectStore(l),a=n.getAll();a.onsuccess=(t=>{const n=t.target.result.filter(t=>t.projectId===e);o(n)}),a.onerror=(e=>{console.error("Get versions error:",e.target.errorCode)})}function o(e){const t=document.getElementById("versionsList"),n=document.getElementById("versionList");t.innerHTML="",n.innerHTML="<option disabled selected>Version List</option>",e.forEach(e=>{const o=document.createElement("li");o.textContent=`${e.versionName||"Unnamed"}  :   ${new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})}`,o.setAttribute("data-version-id",e.id),o.setAttribute("data-info",`${e.versionName||"Unnamed"}`);const r=document.createElement("span");r.textContent="DELETE",r.className="delete-btn",r.onclick=(()=>a(e.id)),o.appendChild(r);const s=document.createElement("span");s.textContent="EXPORT",s.className="export-btn",s.onclick=(()=>i(e.id)),s.setAttribute("datainfo",$(this).parent().text()),o.appendChild(s),t.appendChild(o);const c=document.createElement("option");c.value=e.id,c.text=`${e.versionName||"Unnamed"} - ${new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})}`,n.add(c)}),$(".export-btn").each(function(){thisistheversion=$(this).parent("li").attr("data-version-id"),$(this).after('<div class="load-btn" data-version-id="'+thisistheversion+'" style="margin-right:10px;font-size: 0.8rem;">Load Version</div>')}),$(".load-btn").on("click",function(){myversionloadnum=$(this).attr("data-version-id"),$('#versionList option[value="'+myversionloadnum+'"]').prop("selected",!0).trigger("change"),$("#uniqueModal").fadeOut(),$("#versionsModal").hide()})}function a(e){const t=d.transaction([l],"readwrite"),n=t.objectStore(l),o=n.delete(e);o.onsuccess=(()=>{$(".saveinfo").text("Version Deleted Successfully"),s()}),o.onerror=(e=>{console.error("Delete version error:",e.target.errorCode)})}function r(e){const t=d.transaction([l],"readonly"),n=t.objectStore(l),o=n.get(e);o.onsuccess=(e=>{const t=e.target.result;document.getElementById("pullthecode2").innerHTML=t.content}),o.onerror=(e=>{console.error("Revert version error:",e.target.errorCode)}),$("#beautycode").val($("#pullthecode3").html())}function i(e,t){function n(t){var n="ProjectVersionsDB",o="versionsStore",a=e,r=indexedDB.open(n);r.onerror=function(e){console.error("IndexedDB error: ",e.target.errorCode)},r.onsuccess=function(e){var n=e.target.result,r=n.transaction([o],"readonly"),i=r.objectStore(o),s=i.get(a);s.onerror=function(e){console.error("Error retrieving data from IndexedDB: ",e.target.errorCode)},s.onsuccess=function(e){s.result?t(s.result.content):console.error("No data found for the selected version.")}}}function o(e,t){var n="Version"+t+"List.txt",o=n,a=new Blob([e],{type:"text/plain"}),r=document.createElement("a");r.className="outsidelink",r.download=o,r.href=window.URL.createObjectURL(a),document.body.appendChild(r),r.click(),document.body.removeChild(r)}n(function(e){o(e)})}function s(){n(1)}const c="ProjectVersionsDB",l="versionsStore";let d;document.getElementById("showVersionBtn2").addEventListener("click",()=>{$("#versioningmodalshow").hide(),n(1),document.getElementById("versionsModal").style.display="block"}),document.getElementById("saveVersionBtn").addEventListener("click",()=>{const e=document.getElementById("versionName").value,n=document.getElementById("pullthecode2").innerHTML;t(e,n)}),document.getElementById("revertVersionBtn").addEventListener("click",()=>{const e=parseInt(document.getElementById("versionList").value);r(e)}),document.getElementById("clearVersionsBtn").addEventListener("click",()=>{const e=d.transaction([l],"readwrite"),t=e.objectStore(l),n=t.clear();n.onsuccess=(()=>{$(".saveinfo").text("All Versions Cleared Successfully"),s()}),n.onerror=(e=>{console.error("Clear versions error:",e.target.errorCode)})}),document.getElementById("showVersionsBtn").addEventListener("click",()=>{n(1),document.getElementById("versionsModal").style.display="block"}),document.querySelector(".modal .close").addEventListener("click",()=>{document.getElementById("versionsModal").style.display="none",$("#uniqueModal").fadeOut()}),window.onclick=(e=>{const t=document.getElementById("versionsModal");e.target===t&&(t.style.display="none",$("#uniqueModal").fadeOut())}),e()}),$(document).ready(function(){$("#colorPicker").on("input",function(){var e=$(this).val();$("#colorDisplay").css("background-color",e)})}),$(document).ready(function(){function e(){if($("#uniqueModal").show(),parent&&parent.document){var e=parent.document.getElementById("headerstart");e&&(e.style.display="none")}}function t(){if($("#uniqueModal").hide(),parent&&parent.document){var e=parent.document.getElementById("headerstart");e&&(e.style.display="block")}}window.addEventListener("message",function(t){console.log("Message received in embedded content:",t.data),"showModal"===t.data.action&&(console.log("Received showModal message"),e())}),$(".close-modal").on("click",t),$(window).on("click",function(e){$(e.target).is("#uniqueModal")&&t()})}),document.addEventListener("DOMContentLoaded",function(){const e=["A journey of a thousand miles begins with a single step.","Rome wasn't built in a day.","The journey is the reward.","The person who moves a mountain begins by carrying away small stones.","Little by little, one travels far.","Great things are not done by impulse, but by a series of small things brought together.","Success is the sum of small efforts, repeated day in and day out.","A little progress each day adds up to big results.","The secret of getting ahead is getting started.","Step by step and the thing is done.","Small deeds done are better than great deeds planned.","Big journeys begin with small steps.","The smallest deed is better than the greatest intention.","By the yard, tasks are hard; but inch by inch, anything's a cinch.","One step at a time.","Little drops of water make a mighty ocean.","The distance is nothing; it is only the first step that is difficult.","Small steps lead to big changes.","Every accomplishment starts with the decision to try.","The only impossible journey is the one you never begin.","A single sunbeam is enough to drive away many shadows.","Small steps every day.","Slow and steady wins the race.","One step at a time.","The journey of a thousand miles begins with one step.","Tiny steps will take you to the finish line.","The way to get started is to quit talking and begin doing.","Success is a series of small wins.","The difference between ordinary and extraordinary is that little extra."],t=e[Math.floor(Math.random()*e.length)];document.getElementById("inspire").innerText=t}),$("#loadstartmenu").on("click",function(){if($("#uniqueModal").show("fold",{horizFirst:!0},1e3),$(".unique-box").show(),parent&&parent.document){var e=parent.document.getElementById("headerstart"),t=parent.document.getElementById("add-tab");e&&(e.style.display="none",t.style.display="none")}}),$("#openNotebookWindow").on("click",function(){window.open("notebook.html","NotebookWindow","width=1024,height=768")});